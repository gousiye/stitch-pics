# 项目介绍
进行图像拼接，读取一对图片，然后进行拼接，得到拼接后的图像和图片重合部分的PSNR值，最后计算平均的PSNR值。  
  

# 拼接的主要流程
1. 通过`SIFT`算法得到一对图片的角点。
2. 根据角点(大于等于4)就可以计算`Homography`矩阵，可以得到两个H矩阵，分别对应左边和右边图片变换
3. 根据img1变换img2不动，img1不动img2变换计算不为黑的部分判断是哪张图片需要变换，确定最终的Homography矩阵
4. 通过Homography对一张图片进行变换后，两张图片就基本在同一视角了，此时可以计算两张图片重叠部分的PSNR值
5. 将两张图片的重叠部分重叠
6. 加权融合消除拼缝
7. 裁剪多余黑色


# 项目特色
根据角点计算H矩阵的时候，选择了自己实现，且最终得到的效果可以接受    

- 计算`Homography矩阵`的主要流程如下
  1. 对角点坐标进行标准化
  2. 建立DLT方程组
  3. SVD求解方程组的解
  4. 对解反归一化  
<br>
- 通常为了得到较好的H矩阵，还需要使用`RANSAC`通过迭代来得到一个结果，RANSAC的流程大致如下  
  1. 设置一个角点为内点的概率和整体模型预计得到结果的概率，得到总的迭代次数
  2. 随机抽取固定数量的一些点，根据前面的过程得到一个H矩阵
  3. 讲H矩阵应用到所有的角点上，计算img1所有角点经过映射后于img2对应角点的距离
  4. 该距离和之前设置的内点距离阈值对比，判断是否为内点，统计所有内点的数量
  5. 回到步骤2，不断重复2-4步骤，直至迭代结束，期间更新最多数量的内点和对应的H矩阵   

# 项目运行
打开该目录下的`main.py`，直接运行即可